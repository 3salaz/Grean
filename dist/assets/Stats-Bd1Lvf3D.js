import{o as x,q as e,t as C,v as w,x as u,ak as S,al as N,F as h,C as j,L as A,ad as H,E as k,y as M,z as F,A as L,B as O,P as m,Y as W,am as T,an as R,ao as V}from"./index-Cbk5-mWy.js";function Y(s,a,l){return typeof s=="string"?s=document.querySelectorAll(s):s instanceof Element&&(s=[s]),Array.from(s||[])}const B={some:0,all:1};function q(s,a,{root:l,margin:c,amount:i="some"}={}){const p=Y(s),o=new WeakMap,r=f=>{f.forEach(t=>{const n=o.get(t.target);if(t.isIntersecting!==!!n)if(t.isIntersecting){const g=a(t);typeof g=="function"?o.set(t.target,g):d.unobserve(t.target)}else n&&(n(t),o.delete(t.target))})},d=new IntersectionObserver(r,{root:l,rootMargin:c,threshold:typeof i=="number"?i:B[i]});return p.forEach(f=>d.observe(f)),()=>d.disconnect()}function G(s,{root:a,margin:l,amount:c,once:i=!1}={}){const[p,o]=x.useState(!1);return x.useEffect(()=>{if(!s.current||i&&p)return;const r=()=>(o(!0),i?void 0:()=>o(!1)),d={root:a&&a.current||void 0,margin:l,amount:c};return q(s.current,r,d)},[a,s,l,i,c]),p}function U({handleClose:s}){const[a,l]=x.useState("all"),c=[{date:"2024-09-01",aluminumWeight:10,plasticWeight:5},{date:"2024-09-02",aluminumWeight:8,plasticWeight:3},{date:"2024-09-03",aluminumWeight:12,plasticWeight:6},{date:"2024-09-04",aluminumWeight:9,plasticWeight:4},{date:"2024-08-25",aluminumWeight:50,plasticWeight:20},{date:"2024-08-18",aluminumWeight:45,plasticWeight:18},{date:"2024-08-11",aluminumWeight:55,plasticWeight:22},{date:"2024-01-01",aluminumWeight:500,plasticWeight:250},{date:"2024-02-01",aluminumWeight:480,plasticWeight:240},{date:"2024-03-01",aluminumWeight:510,plasticWeight:260},{date:"2024-04-01",aluminumWeight:520,plasticWeight:270}],i=t=>{const n=new Date(t);return new Date(n.getFullYear(),n.getMonth(),n.getDate())},o=(()=>{const t=i(new Date);switch(a){case"weekly":const n=new Date(t);return n.setDate(t.getDate()-7),c.filter(g=>i(g.date)>=n);case"monthly":return c.filter(g=>{const b=i(g.date);return b.getMonth()===t.getMonth()&&b.getFullYear()===t.getFullYear()});case"all":default:return c}})(),r=x.useRef(null),d=G(r,{once:!0}),f=t=>{console.log("Pickup clicked:",t)};return e.jsx(C,{className:"m-0 p-0 flex flex-col",ref:r,children:e.jsxs(w,{className:"bg-white",children:[e.jsx(u,{size:"12",className:"ion-padding",children:e.jsxs(S,{value:a,className:"bg-grean rounded-md transition-all duration-500",onIonChange:t=>l(t.detail.value),children:[e.jsx(N,{value:"all",className:a==="all"?"bg-white":"text-white",children:e.jsx(h,{children:"All"})}),e.jsx(N,{value:"weekly",className:a==="weekly"?"bg-white":"text-white",children:e.jsx(h,{children:"Weekly"})}),e.jsx(N,{value:"monthly",className:a==="monthly"?"bg-white":"text-white",children:e.jsx(h,{children:"Monthly"})})]})}),e.jsx(u,{size:"12",className:"ion-padding",children:e.jsx(j.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.5},children:e.jsxs(A,{className:"w-full bg-transparent overflow-auto",style:{minHeight:"300px",maxHeight:"400px"},children:[e.jsx(j.div,{initial:{opacity:0,y:-20},animate:d?{opacity:1,y:0}:{},transition:{duration:.5},children:e.jsxs(H,{className:"text-xl font-bold text-center",children:["History |"," ",a.charAt(0).toUpperCase()+a.slice(1)]})}),e.jsx(j.div,{initial:{opacity:0},animate:d?{opacity:1}:{},transition:{duration:.5,delay:.2},children:e.jsxs(k,{className:"flex justify-between font-bold bg-transparent",children:[e.jsx(h,{children:"Date"}),e.jsx(h,{children:"Aluminum"}),e.jsx(h,{children:"Plastic"})]})}),o.map((t,n)=>e.jsx(j.div,{initial:{opacity:0,y:20},animate:d?{opacity:1,y:0}:{},transition:{duration:.3,delay:n*.1},children:e.jsxs(k,{className:"flex justify-between cursor-pointer",onClick:()=>f(t),children:[e.jsx(h,{children:t.date}),e.jsx(h,{children:e.jsxs(j.span,{initial:{scale:.8},animate:{scale:1},transition:{duration:.3},children:[t.aluminumWeight," lbs"]})}),e.jsx(h,{children:e.jsxs(j.span,{initial:{scale:.8},animate:{scale:1},transition:{duration:.3},children:[t.plasticWeight," lbs"]})})]})},n))]})},a)})]})})}function $(){return e.jsxs(M,{className:"bg-transparent shadow-none bg-white p-0 mx-2",children:[e.jsx(F,{children:e.jsx(L,{className:"text-3xl",children:"Recycling Stats"})}),e.jsxs(O,{className:"flex flex-col items-center gap-2 bg-transparent",children:[e.jsxs(w,{className:"flex items-center justify-between w-full bg-light rounded-md",children:[e.jsxs(u,{size:"auto",className:"flex flex-col items-center rounded-full ion-padding gap-2",children:[e.jsx(m,{className:"text-2xl",children:"Pickups"}),e.jsx(W,{size:"large",icon:T})]}),e.jsx(u,{size:"auto",className:"ion-padding",children:e.jsx(m,{className:"text-4xl",children:"21"})})]}),e.jsxs(w,{className:"flex items-center justify-between w-full bg-light rounded-md",children:[e.jsxs(u,{size:"auto",className:"flex flex-col items-center rounded-full ion-padding gap-2",children:[e.jsx(m,{className:"text-2xl",children:"Weight"}),e.jsx(W,{size:"large",icon:R})]}),e.jsx(u,{size:"auto",className:"ion-padding",children:e.jsx(m,{className:"text-4xl",children:"4,032"})})]}),e.jsxs(w,{className:"flex items-center justify-between w-full bg-light rounded-md",children:[e.jsxs(u,{size:"auto",className:"flex flex-col items-center rounded-full ion-padding gap-2",children:[e.jsx(m,{className:"text-2xl",children:"Energy"}),e.jsx(W,{size:"large",icon:V})]}),e.jsx(u,{size:"auto",className:"ion-padding",children:e.jsx(m,{className:"text-4xl",children:"21"})})]})]})]})}function J(){const s=[{material:"Plastic",percentage:42.21,weight:"1702lbs"},{material:"Aluminum",percentage:45.24,weight:"1824lbs"},{material:"Glass",percentage:12,weight:"506lbs"}];return e.jsxs(w,{className:"bg-slate-200 p-4 md:rounded-t-md min-h-[350px]",children:[e.jsx(u,{size:"12",className:"text-left mb-4 ion-padding",children:e.jsx(m,{className:"text-2xl font-bold text-gray-800",children:"Metrics"})}),s.map((a,l)=>e.jsxs(u,{size:"4",className:"flex flex-col items-center justify-end",children:[e.jsx(j.div,{className:"relative w-20 bg-grean drop-shadow-md text-white text-center rounded-md",initial:{height:0},animate:{height:`${a.percentage*5}px`},transition:{duration:1,ease:"easeOut"},style:{maxHeight:"350px"},children:e.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-sm font-bold",children:[a.percentage,"%"]})}),e.jsx(m,{className:"font-semibold mt-2 text-gray-700",children:a.weight}),e.jsx(m,{className:"mt-1 text-sm text-gray-500",children:a.material})]},l))]})}const Q=({profile:s})=>{const[a,l]=x.useState(0),[c,i]=x.useState(1),[p,o]=x.useState(0),r=100,[d,f]=x.useState(0);return x.useEffect(()=>{var I,P,z;const t=((P=(I=s==null?void 0:s.stats)==null?void 0:I.pickups)==null?void 0:P.length)||0,n=((z=s==null?void 0:s.stats)==null?void 0:z.weight)||{aluminum:0,glass:0,plastic:0},g=t*20,b=n.aluminum+n.glass+n.plastic,y=g+b;f(y);const D=Math.floor(y/r)+1;i(D);const v=y%r;l(v);const E=v/r*100;o(E)},[s]),e.jsx(C,{color:"light",className:"h-full relative flex flex-col items-center justify-between ion-no-padding bg-gradient-to-t from-grean to-blue-300",children:e.jsxs("main",{className:"container flex-grow mx-auto max-w-4xl overflow-auto",children:[e.jsx($,{}),e.jsx(J,{}),e.jsx(U,{})]})})};export{Q as default};
