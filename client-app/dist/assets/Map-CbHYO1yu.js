import{M as H,q as l,t as e,A as f,N as r,O as o,x as F,T as S,U as v,X as P,Y as Z,$ as D,Z as O,a0 as _,G as j,P as $,am as Q}from"./index-DApr8FCz.js";import{a as U,M as G,h as Y,b as K,c as W,A as J}from"./index.modern-B8u-xNJA.js";const V={lat:37.7749,lng:-122.4194},q={north:38.343,south:36.8,west:-123.173,east:-121.684},X=["Retail","Food & Beverage","Health & Wellness","Professional Services","Education","Entertainment","Other"],ee=({profile:b})=>{const{profileLocations:z,businessLocations:k,loading:B}=H(),[t,u]=l.useState(null),[h,m]=l.useState(null),[E,N]=l.useState(V),[L,y]=l.useState(11),[A,w]=l.useState(""),[C,x]=l.useState([]),g=l.useRef(null),M=l.useRef(null),[p,R]=l.useState(!1),n=U();l.useEffect(()=>{function s(a){g.current&&!g.current.contains(a.target)&&u(null)}return t&&document.addEventListener("pointerdown",s),()=>{document.removeEventListener("pointerdown",s)}},[t]),l.useEffect(()=>{n&&n.setOptions({restriction:{latLngBounds:q,strictBounds:!0},zoomControl:!1,streetViewControl:!1,mapTypeControl:!1})},[n]);const I=[...z,...k].reduce((s,a)=>{const d=a.locationType==="Home",i=!h||a.category===h;return!s.some(c=>c.id===a.id)&&(d||i)&&s.push(a),s},[]),T=s=>{u(s),N({lat:s.latitude,lng:s.longitude}),y(14),s.latitude&&s.longitude&&(n==null||n.panTo({lat:s.latitude,lng:s.longitude}),n==null||n.setZoom(14))};return B?e.jsx(f,{className:"h-full ion-no-padding container mx-auto",children:e.jsx(r,{className:"h-full",children:e.jsx(o,{className:"flex items-center justify-center w-full h-full bg-white",children:e.jsx(F,{color:"primary",name:"crescent"})})})}):e.jsxs("main",{className:"relative w-full flex-grow overflow-auto",children:[e.jsx(f,{className:"absolute top-0 left-0 w-full z-10 px-2",children:e.jsxs(r,{ref:M,className:"flex-nowrap overflow-x-auto no-scrollbar bg-white p-2 rounded-b-xl shadow-md text-xs gap-2 max-w-lg mx-auto",style:{WebkitOverflowScrolling:"touch"},children:[e.jsx(o,{size:"auto",className:`flex-shrink-0 px-3 py-1 rounded-full ${h===null?"bg-green-600 text-white":"bg-gray-200"}`,children:e.jsx("button",{onClick:()=>{m(null)},children:"All"})}),X.map(s=>e.jsx(o,{size:"auto",className:`flex-shrink-0 px-3 py-1 rounded-full ${h===s?"bg-green-600 text-white":"bg-gray-200"}`,children:e.jsx("button",{onClick:()=>m(s),children:s})},s))]})}),e.jsx(G,{style:{width:"100%",height:"100%"},defaultCenter:E,defaultZoom:L,mapId:"pk.eyJ1IjoiM3NhbGF6IiwiYSI6ImNsZG1xNjZ2aDBidnozb21kNTIxNTQ1a2wifQ.0JC6qoYDFC96znCbHh4kpQ",gestureHandling:"greedy",children:I.map(s=>{const{latitude:a,longitude:d}=s;if(a==null||d==null)return null;const i=s.locationType==="Home"?Y:K;return e.jsx(W,{position:{lat:a,lng:d},onClick:()=>T(s),children:e.jsx("img",{src:i,width:32,height:32})},s.id)})}),e.jsx(S,{children:!t&&e.jsx(v.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",stiffness:100,damping:15},className:"absolute bottom-0 left-0 w-full z-20 flex justify-center",children:e.jsxs(f,{className:"w-full max-w-xl flex-col gap-2 p-2 rounded-xl",children:[e.jsx(r,{children:e.jsx(o,{size:"12",className:"shadow-lg",children:e.jsx("input",{type:"text",placeholder:"Search by name or address",onFocus:()=>{m(null)},value:A,onChange:s=>{const a=s.target.value;if(w(a),a.trim()==="")x([]);else{const d=I.filter(i=>[i.businessName,i.homeName,i.address].some(c=>c==null?void 0:c.toLowerCase().includes(a.toLowerCase())));x(d)}},className:"w-full p-2 border border-2 border-[#75B657] bg-white rounded-lg"})})}),C.length>0&&e.jsx(r,{children:e.jsx(o,{size:"auto",className:"bg-white border rounded-lg overflow-y-auto h-40 w-full",children:C.map(s=>e.jsxs("div",{className:"p-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{u(s),N({lat:s.latitude,lng:s.longitude}),y(14),w(""),x([]),s.latitude&&s.longitude&&(n==null||n.panTo({lat:s.latitude,lng:s.longitude}),n==null||n.setZoom(14))},children:[e.jsx("div",{className:"font-semibold",children:s.businessName||s.homeName||"Unnamed"}),e.jsx("div",{className:"text-sm text-gray-500",children:s.address})]},s.id))})})]})})}),e.jsx(S,{children:t&&e.jsx(v.section,{ref:g,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:100,damping:15},className:"absolute bg-slate-800/20 bg-opacity-50 bottom-0 left-0 shadow-lg rounded-t-lg md:h-[40%] w-full p-2",children:e.jsxs(P,{className:"bg-white max-w-xl mx-auto border-2 border-[#75B657] h-full min-h-[200px] relative ion-padding rounded-md flex flex-col gap-4",children:[e.jsxs(Z,{color:"light",className:"ion-padding",children:[e.jsx(D,{children:t.businessName||"Unnamed Business"}),e.jsx(O,{className:"text-xs font-base",children:t.address||"No address provided"})]}),t.locationType==="Business"?e.jsxs(_,{className:"ion-no-padding",children:[e.jsx("span",{className:"absolute top-1 right-2 text-lg",children:e.jsx("img",{src:t.businessLogo||"https://via.placeholder.com/150",alt:"Business Logo",className:"w-16 h-16 rounded-full object-cover border border-gray-300"})}),e.jsxs(r,{className:"ion-padding-horizontal",children:[e.jsx(o,{size:"12",children:e.jsxs("p",{className:"text-gray-600",children:["Category: ",t.category||"N/A"]})}),e.jsxs(o,{size:"12",children:[e.jsx("p",{className:`${p?"":"line-clamp-3"} text-sm text-gray-700`,children:t.businessBio||"No description available yet."}),(t.businessBio||"").length>100&&e.jsx("button",{onClick:()=>R(!p),className:"text-green-500 text-sm mt-1 self-start",children:p?"Show Less":"Read More"})]})]}),e.jsx(r,{class:"flex items-center align-items ion-padding gap-2 mx-auto",children:e.jsx(o,{size:"auto",children:e.jsx("a",{href:t.website||"https://google.com",target:"_blank",rel:"noopener noreferrer",className:"text-green-600 font-medium underline",children:"Visit Website"})})}),e.jsxs(r,{className:"ion-padding-horizontal flex flex-col justify-between items-end gap-2",children:[e.jsx(o,{size:"auto",children:e.jsx("a",{href:`tel:${t.businessPhoneNumber}`,children:e.jsx(j,{size:"small",expand:"block",color:"primary",children:"Call"})})}),e.jsx(o,{size:"auto",children:e.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${t.latitude},${t.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:e.jsx(j,{size:"small",expand:"block",color:"primary",children:"Directions"})})}),e.jsx(o,{size:"auto",className:"flex aspect-square",children:e.jsx(j,{shape:"round",color:"danger",size:"small",className:"",onClick:()=>u(null),children:e.jsx($,{slot:"icon-only",icon:Q})})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.homeName||"Unnamed Home"}),e.jsx("p",{className:"text-gray-600",children:t.address||"No address provided"})]})]})})})]})},se="AIzaSyDKEPzyihH6o1aMfHsj4NHj9I7atg8TNnQ",ae=({profile:b})=>e.jsx(J,{apiKey:se,children:e.jsx(ee,{profile:b})});export{ae as default};
