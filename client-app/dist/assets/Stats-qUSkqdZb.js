import{t as e,Y as y,$ as S,a0 as I,ao as C,ap as O,aq as k,ar as T,as as $,at as E,P as M,y as c,N as W,O as R,U as F,u as q,q as r}from"./index-DApr8FCz.js";import{a as z,m as B}from"./pickups-Cp_RIW2L.js";const o=({icon:s,label:l,value:a})=>e.jsxs("div",{className:"flex items-center gap-3 bg-light rounded-xl p-4 shadow-sm w-full sm:w-auto bg-white",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-[#75B657] text-white shadow-inner",children:e.jsx(M,{icon:s,size:"large"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(c,{className:"text-sm text-gray-500",children:l}),e.jsx(c,{className:"text-xl font-semibold",children:a})]})]}),H=({stats:s})=>{const l=(s==null?void 0:s.completedPickups)||0,a=(s==null?void 0:s.totalWeight)||0,i=(s==null?void 0:s.materials)||{},t=Math.round(a*1.3);return e.jsxs("section",{className:"ion-padding h-full",children:[e.jsx(y,{children:e.jsx(S,{className:"text-2xl font-bold",children:"Recycling Stats"})}),e.jsx(I,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:[e.jsx(o,{icon:C,label:"Pickups",value:l}),e.jsx(o,{icon:O,label:"Total Weight",value:`${a} lbs`}),e.jsx(o,{icon:k,label:"Energy Saved",value:t}),e.jsx(o,{icon:T,label:"Cardboard",value:`${i.cardboard||0} lbs`}),e.jsx(o,{icon:$,label:"Appliances",value:`${i.appliances||0} lbs`}),e.jsx(o,{icon:E,label:"Glass",value:`${i.glass||0} lbs`})]})})]})},L=({materials:s})=>{const l=z.map(t=>{var n;return{type:t,label:((n=B[t])==null?void 0:n.label)||t,weight:s[t]||0}}),a=l.reduce((t,n)=>t+n.weight,0),i=l.map(t=>({...t,percentage:a>0?t.weight/a*100:0})).filter(t=>t.weight>0);return e.jsx("section",{className:"w-full h-full",children:e.jsxs(W,{className:"bg-slate-200 md:rounded-t-md min-h-[350px] h-full flex-wrap justify-center items-end px-4 py-6 gap-y-6",children:[e.jsx(R,{size:"12",className:"text-left mb-4",children:e.jsx(c,{className:"text-2xl font-bold text-gray-800",children:"Metrics"})}),i.map((t,n)=>e.jsxs("div",{className:"flex flex-col items-center mx-3",children:[e.jsxs(c,{className:"text-xs font-medium text-gray-600 mb-1",children:[t.percentage.toFixed(0),"%"]}),e.jsx(F.div,{className:"w-8 rounded-md bg-[#75B657] drop-shadow-md",initial:{height:0},animate:{height:`${t.percentage*2.5}px`},transition:{duration:1,ease:"easeOut"},style:{maxHeight:"240px"}}),e.jsxs(c,{className:"text-sm font-semibold mt-2 text-gray-700",children:[t.weight," lbs"]}),e.jsx(c,{className:"text-xs text-gray-500 text-center mt-1",children:t.label})]},n))]})})},Y=()=>{var u;const{profile:s}=q(),[l,a]=r.useState(0),[i,t]=r.useState(1),[n,j]=r.useState(0),d=100,[A,b]=r.useState(0);return r.useEffect(()=>{var g,p;const w=((g=s==null?void 0:s.stats)==null?void 0:g.completedPickups)||0,x=((p=s==null?void 0:s.stats)==null?void 0:p.weight)||{aluminum:0,glass:0,plastic:0},f=w*20,v=(x.aluminum||0)+(x.glass||0)+(x.plastic||0),m=f+v;b(m);const N=Math.floor(m/d)+1;t(N);const h=m%d;a(h);const P=h/d*100;j(P)},[s]),e.jsxs("main",{className:"container max-w-2xl mx-auto flex-grow overflow-auto",children:[e.jsx(H,{stats:(s==null?void 0:s.stats)||{}}),e.jsx(L,{materials:((u=s==null?void 0:s.stats)==null?void 0:u.materials)||{}})]})};export{Y as default};
